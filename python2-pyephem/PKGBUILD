# Maintainer: masutu Subric <masutu dot arch at gmail dot com>
# Contributor: Michal Marek <reqamst at gmail dot com>

pkgname=python2-pyephem
pkgver=3.7.4.1
pkgrel=1
pkgdesc="PyEphem provides scientific-grade astronomical computations"
arch=('i686' 'x86_64')
url="http://rhodesmill.org/pyephem/"
license=('GPL' 'LGPL')
depends=('python2')
options=(!emptydirs)
source=(http://pypi.python.org/packages/source/p/pyephem/pyephem-$pkgver.tar.gz)
md5sums=('c621c51e09fee452c6e397e9dc2bf499')

build() {
	cd "$srcdir/pyephem-$pkgver"
	chmod go+r src/pyephem.egg-info/*
	for file in $(find . -name '*.py' -print); do
		sed -i 's_^#!.*/usr/bin/python_#!/usr/bin/python2_' $file
		sed -i 's_^#!.*/usr/bin/env.*python_#!/usr/bin/env python2_' $file
	done
	python2 setup.py install --root=$pkgdir/ --optimize=1
	chmod go+r $pkgdir/usr/lib/python2.7/site-packages/ephem/tests/usno/*
	chmod go+r $pkgdir/usr/lib/python2.7/site-packages/ephem/tests/jpl/*
	chmod go+r $pkgdir/usr/lib/python2.7/site-packages/ephem/doc/*
}
