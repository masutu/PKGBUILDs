# Maintainer: masutu <masutu dot arch at gmail dot com>
# Contributor: masutu <masutu dot arch at gmail dot com>
pkgname=mmass
pkgver=3.12.1
pkgrel=1
pkgdesc="Open source tool for precise mass spectrometric data analysis and interpretation written in python."
arch=(i686)
url="http://www.mmass.org"
license=('GPL')
depends=('python2-numpy' 'wxpython')
source=(${url}/download/files/${pkgname}_v${pkgver}_source.zip)
md5sums=('1a2b13180df55ca3bb13318a4374d699')

build() {
  cd "$srcdir/mMass/mspy/plot"
  python2 setup.py build
  cp build/lib.linux-*-*/calculations.so .
}

package() {
  cd "$srcdir/mMass"
  install -m 0755 -d $pkgdir/usr/bin
  install -m 0755 -d $pkgdir/usr/share/$pkgname
  install -m 0755 -d $pkgdir/usr/share/$pkgname/{configs,gui,mspy}
  install -m 0755 -d $pkgdir/usr/share/$pkgname/gui/images/gtk
  install -m 0755 -d $pkgdir/usr/share/$pkgname/mspy/plot
  install -m 0644 mmass.py $pkgdir/usr/share/$pkgname
  install -m 0644 configs/*.xml $pkgdir/usr/share/$pkgname/configs
  install -m 0644 gui/*.py $pkgdir/usr/share/$pkgname/gui
  install -m 0644 gui/images/gtk/*.png $pkgdir/usr/share/$pkgname/gui/images/gtk
  install -m 0644 mspy/*.py $pkgdir/usr/share/$pkgname/mspy
  install -m 0644 mspy/plot/*.py $pkgdir/usr/share/$pkgname/mspy/plot
  install -m 0755 mspy/plot/calculations.so $pkgdir/usr/share/$pkgname/mspy/plot
  cat >$pkgdir/usr/bin/mmass <<EOF
#!/bin/sh
python2 /usr/share/mmass/mmass.py
EOF
  chmod 0755 $pkgdir/usr/bin/mmass
}

# vim:set ts=2 sw=2 et:
